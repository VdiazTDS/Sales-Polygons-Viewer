<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>TDS-PAK Sales Polygons Viewer</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- App CSS -->
  <link rel="stylesheet" href="style.css" />

  <link rel="icon" href="favicon.ico" />
</head>

<body>
  <!-- ================= HEADER ================= -->
  <header>
    <h1>TDS-PAK Sales Polygons Viewer</h1>
    <p>Upload, manage, and visualize TDS-PAK sales polygon GeoJSON layers</p>
    <button id="mobileMenuBtn">‚ò∞ Menu</button>
  </header>

  <!-- ================= MAIN LAYOUT ================= -->
  <div class="app-container">

    <!-- Desktop sidebar collapse toggle -->
    <button id="toggleSidebarBtn" class="sidebar-toggle">‚ùÆ</button>

    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar">

      <!-- Upload -->
      <div id="dropZone">üìÇ Drag & drop GeoJSON or click to upload</div>

      <!-- Saved GeoJSON Layers -->
      <div class="filter-group">
        <strong>GeoJSON Layers</strong>
        <ul id="savedFiles"></ul>
      </div>

      <!-- Layer Instructions -->
      <div class="filter-group">
        <strong>How to Use</strong>
        <ul id="statsList">
          <li><b>Uploading new files:</b></li>
          <li>‚Ä¢ Drag and drop a <code>.geojson</code> or <code>.json</code> file into the upload box</li>
          <li>‚Ä¢ Or click the upload box to choose a file from your computer</li>
          <li>‚Ä¢ The layer will automatically appear on the map after upload</li>
          <br />
          <li><b>Opening existing files:</b></li>
          <li>‚Ä¢ Find the layer name in the <i>GeoJSON Layers</i> list</li>
          <li>‚Ä¢ Click <b>Open</b> to display it on the map</li>
          <li>‚Ä¢ Pan and zoom to review the sales territory polygons</li>
          <br />
          <li><b>Managing files:</b></li>
          <li>‚Ä¢ Click <b>Delete</b> to permanently remove a layer from storage</li>
          <li>‚Ä¢ Use the basemap selector to change map style</li>
          <li>‚Ä¢ Click <b>Reset Map View</b> to return to the full layer extent</li>
        </ul>
      </div>

      <!-- Reset Map -->
      <button id="resetMapBtn">Reset Map View</button>

      <!-- Basemap Selector -->
      <select id="baseMapSelect">
        <option value="streets">Streets</option>
        <option value="satellite">Satellite</option>
      </select>

    </aside>

    <!-- ================= MAP ================= -->
    <main class="map-container">
      <div id="map"></div>
    </main>

  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- App JS -->
  <script src="app.js"></script>
</body>
</html>
